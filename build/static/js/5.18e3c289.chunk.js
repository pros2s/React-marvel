(this.webpackJsonpmarvel=this.webpackJsonpmarvel||[]).push([[5],{100:function(e,t,r){},101:function(e,t,r){},210:function(e,t,r){},219:function(e,t,r){"use strict";r.r(t);var c=r(4),a=r(0),n=r(41),s=r(31),i=r(2),o=function(e){var t=e.data,r=t.name,c=t.description,a=t.thumbnail,n=t.homepage,s=t.wiki,o="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===a?"contain":"cover";return Object(i.jsxs)("div",{className:"randomchar__block",children:[Object(i.jsx)("img",{src:a,style:{objectFit:o},alt:"Random character",className:"randomchar__img"}),Object(i.jsxs)("div",{className:"randomchar__info",children:[Object(i.jsx)("p",{className:"randomchar__name",children:r}),Object(i.jsx)("p",{className:"randomchar__descr",children:c||"Here should be description of personage"}),Object(i.jsxs)("div",{className:"randomchar__btns",children:[Object(i.jsx)("a",{href:n,className:"button button__main",target:"_blank",rel:"noopener noreferrer",children:Object(i.jsx)("div",{className:"inner",children:"homepage"})}),Object(i.jsx)("a",{href:s,className:"button button__secondary",target:"_blank",rel:"noopener noreferrer",children:Object(i.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]})},l=r(40),u=(r(99),r.p+"static/media/mjolnir.61f31e18.png"),h=function(){var e=Object(a.useState)({}),t=Object(c.a)(e,2),r=t[0],n=t[1];Object(a.useEffect)((function(){v();var e=setInterval(v,1e5);return function(){clearInterval(e)}}),[]);var h=function(e){n(e)},j=Object(s.a)(),b=j.total,d=j.getEveryOne,m=j.getCharacter,f=j.clearError,p=j.process,O=j.setProcess,v=function(){var e;b().then((function(t){e=Math.floor(Math.random()*(t+1-100)+100),d(e).then((function(e){var t=[];e.forEach((function(e){return t.push(e.id)}));var r=Math.floor(Math.random()*t.length),c=t[r];f(),m(c).then(h).then((function(){return O("confirmed")}))}))}))};return Object(i.jsxs)("div",{className:"randomchar",children:[Object(l.a)(o,p,r),Object(i.jsxs)("div",{className:"randomchar__static",children:[Object(i.jsxs)("p",{className:"randomchar__title",children:["Random character for today!",Object(i.jsx)("br",{}),"Do you want to get to know him better?"]}),Object(i.jsx)("p",{className:"randomchar__title",children:"Or choose another one"}),Object(i.jsx)("button",{className:"button button__main",onClick:v,children:Object(i.jsx)("div",{className:"inner",children:"try it"})}),Object(i.jsx)("img",{src:u,alt:"mjolnir",className:"randomchar__decoration"})]})]})},j=r(38),b=r(54),d=(r(100),function(e){var t=Object(a.useState)(!1),r=Object(c.a)(t,2),n=r[0],o=r[1],l=Object(a.useState)(!1),u=Object(c.a)(l,2),h=u[0],d=u[1],m=Object(a.useState)([]),f=Object(c.a)(m,2),p=f[0],O=f[1],v=Object(a.useState)(210),x=Object(c.a)(v,2),_=x[0],g=x[1],N=Object(s.a)(),k=N.getAllCharacters,w=N.process,y=N.setProcess;Object(a.useEffect)((function(){C(_,!0)}),[]);var C=function(e,t){o(!t),k(e).then(E).then((function(){return y("confirmed")}))},E=function(e){var t=e.length<9;O([].concat(Object(j.a)(p),Object(j.a)(e))),g((function(e){return e+9})),o(!1),d(t)},S=Object(a.useRef)([]),F=function(t,r){e.onCharSelected(t),function(e){var t=S.current;t.forEach((function(e){return e.classList.remove("char__item_selected")})),t[e].classList.add("char__item_selected"),t[e].focus()}(r)},P=Object(a.useMemo)((function(){return Object(b.a)((function(){return p.map((function(e,t){var r="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===e.thumbnail?"contain":"cover";return Object(i.jsxs)("li",{className:"char__item",ref:function(e){return S.current[t]=e},tabIndex:0,onClick:function(){return F(e.id,t)},onKeyPress:function(r){" "!==r.key&&"Enter"!==r.key||F(e.id,t)},children:[Object(i.jsx)("img",{style:{objectFit:r},src:e.thumbnail,alt:e.name}),Object(i.jsx)("div",{className:"char__name",children:e.name})]},e.id)}))}),w,n)}),[w]);return Object(i.jsxs)("div",{className:"char__list",children:[Object(i.jsx)("ul",{className:"char__grid",children:P}),Object(i.jsx)("button",{className:"button button__main button__long",style:{display:h?"none":"block"},disabled:n,onClick:function(){return C(_)},children:Object(i.jsx)("div",{className:"inner",children:"load more"})})]})}),m=r(220),f=r(6),p=function(e){var t=e.data,r=t.name,c=t.description,a=t.thumbnail,n=t.homepage,s=t.wiki,o=t.comics,l="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===a?"contain":"cover",u=o.map((function(e,t){var r=e.resourceURI,c=e.name;if(!(t>9))return Object(i.jsx)(f.b,{style:{width:"100%"},to:"".concat(r.match(/\/comics\/[0-9]/g)),children:Object(i.jsx)("li",{className:"char__comics-item",tabIndex:0,children:c},t)},t)}));return 0===o.length&&(u="Here should be some comicses"),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:"char__basics",children:[Object(i.jsx)("img",{style:{objectFit:l},src:a,alt:r}),Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{className:"char__info-name",children:r}),Object(i.jsxs)("div",{className:"char__btns",children:[Object(i.jsx)("a",{href:n,className:"button button__main",target:"_blank",rel:"noopener noreferrer",children:Object(i.jsx)("div",{className:"inner",children:"homepage"})}),Object(i.jsx)("a",{href:s,className:"button button__secondary",target:"_blank",rel:"noopener noreferrer",children:Object(i.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]}),Object(i.jsx)("div",{className:"char__descr",children:c}),Object(i.jsx)("div",{className:"char__comics",children:"Comics:"}),Object(i.jsx)("ul",{className:"char__comics-list",children:u})]})},O=(r(101),function(e){var t=e.charId,r=Object(a.useState)(null),n=Object(c.a)(r,2),o=n[0],u=n[1],h=Object(a.useState)(!1),j=Object(c.a)(h,2),b=j[0],d=j[1];Object(a.useEffect)((function(){N()}),[t]);var f=function(e){d(!0),u(e)},O=Object(s.a)(),v=O.getCharacter,x=O.clearError,_=O.process,g=O.setProcess,N=function(){t&&(d(!1),x(),v(t).then(f).then((function(){return g("confirmed")})))};return Object(i.jsx)(m.a,{in:b,timeout:1e3,classNames:"char__animate",children:Object(i.jsx)("div",{className:"char__info",children:Object(l.a)(p,_,o)})})}),v=r(215),x=r(216),_=r(27),g=function(e){var t=e.char,r=t.length>0?Object(i.jsxs)("div",{className:"char__search-wrapper",children:[Object(i.jsxs)("div",{className:"char__search-success",children:["There is! Do you want to visit ",t[0].name," page?"]}),Object(i.jsx)(f.b,{to:"/characters/".concat(t[0].id),className:"button button__secondary",children:Object(i.jsx)("div",{className:"inner",children:"To page"})})]}):Object(i.jsx)("div",{className:"char__search-error",children:"The character was not found. Check the name and try again"});return Object(i.jsx)(i.Fragment,{children:r})},N=(r(210),function(){var e=Object(a.useState)(null),t=Object(c.a)(e,2),r=t[0],n=t[1],o=Object(s.a)(),l=o.error,u=o.loading,h=o.getCharacterByName,j=o.clearError,b=function(e){n(e)},d=l?Object(i.jsx)("div",{className:"char__search-critical-error",children:Object(i.jsx)(_.a,{})}):null,m=r?Object(i.jsx)(g,{char:r}):null;return Object(i.jsxs)("div",{className:"char__search-form",children:[Object(i.jsx)(v.d,{initialValues:{charName:""},validationSchema:x.a({charName:x.b().required("This field has to be required")}),onSubmit:function(e){!function(e){j(),h(e).then(b)}(e.charName)},children:Object(i.jsxs)(v.c,{children:[Object(i.jsx)("label",{htmlFor:"charName",className:"char__search-label",children:"Or find a character by name:"}),Object(i.jsxs)("div",{className:"char__search-wrapper",children:[Object(i.jsx)(v.b,{id:"charName",type:"text",name:"charName",placeholder:"Enter name"}),Object(i.jsx)("button",{className:"button button__main",type:"submit",disabled:u,children:Object(i.jsx)("div",{className:"inner",children:"find"})})]}),Object(i.jsx)(v.a,{className:"char__search-error",component:"div",name:"charName"})]})}),m,d]})}),k=r(25),w=r(26),y=r(34),C=r(35),E=function(e){Object(y.a)(r,e);var t=Object(C.a)(r);function r(){var e;Object(k.a)(this,r);for(var c=arguments.length,a=new Array(c),n=0;n<c;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))).state={error:!1},e}return Object(w.a)(r,[{key:"componentDidCatch",value:function(e,t){console.log(e,t),this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?Object(i.jsx)(_.a,{}):this.props.children}}]),r}(a.Component),S=r.p+"static/media/vision.067d4ae1.png";t.default=function(){var e=Object(a.useState)(null),t=Object(c.a)(e,2),r=t[0],s=t[1];return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)(n.a,{children:[Object(i.jsx)("meta",{name:"description",content:"Marvel information portal"}),Object(i.jsx)("title",{children:"Marvel information portal"})]}),Object(i.jsx)(E,{children:Object(i.jsx)(h,{})}),Object(i.jsxs)("div",{className:"char__content",children:[Object(i.jsx)(E,{children:Object(i.jsx)(d,{onCharSelected:function(e){return s(e)}})}),Object(i.jsx)(E,{children:Object(i.jsxs)("div",{className:"char__settings",children:[Object(i.jsx)(O,{charId:r}),Object(i.jsx)(N,{})]})})]}),Object(i.jsx)("img",{className:"bg-decoration",src:S,alt:"vision"})]})}},27:function(e,t,r){"use strict";var c=r.p+"static/media/error.95e73800.gif",a=r(2);t.a=function(){return Object(a.jsx)("img",{style:{display:"block",width:"150px",height:"150px",margin:"auto"},src:c,alt:"error gif"})}},31:function(e,t,r){"use strict";var c=r(28),a=r.n(c),n=r(29),s=r(4),i=r(0);t.a=function(){var e=function(){var e=Object(i.useState)("waiting"),t=Object(s.a)(e,2),r=t[0],c=t[1];return{request:Object(i.useCallback)(function(){var e=Object(n.a)(a.a.mark((function e(t){var r,n,s,i,o=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:"GET",n=o.length>2&&void 0!==o[2]?o[2]:null,s=o.length>3&&void 0!==o[3]?o[3]:{"Content-type":"application/json"},c("loading"),e.prev=4,e.next=7,fetch(t,{method:r,body:n,headers:s});case 7:if((i=e.sent).ok){e.next=10;break}throw new Error("Could not fetch ".concat(t,"; status: ").concat(i.status));case 10:return e.abrupt("return",i.json());case 13:throw e.prev=13,e.t0=e.catch(4),c("error"),e.t0;case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}(),[]),clearError:Object(i.useCallback)((function(){c("loading")}),[]),process:r,setProcess:c}}(),t=e.request,r=e.clearError,c=e.process,o=e.setProcess,l="https://gateway.marvel.com:443/v1/public/",u="apikey=bc1bc939b59f4d12e5d6c2fcf66f7563",h=function(){var e=Object(n.a)(a.a.mark((function e(){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("".concat(l,"characters?").concat(u));case 2:return r=e.sent,e.abrupt("return",r.data.total);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(n.a)(a.a.mark((function e(){var r,c,n=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>0&&void 0!==n[0]?n[0]:100,e.next=3,t("".concat(l,"characters?limit=100&offset=").concat(r,"&").concat(u));case 3:return c=e.sent,e.abrupt("return",c.data.results.map(O));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(n.a)(a.a.mark((function e(){var r,c,n=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>0&&void 0!==n[0]?n[0]:10,e.next=3,t("".concat(l,"characters?limit=9&offset=").concat(r,"&").concat(u));case 3:return c=e.sent,e.abrupt("return",c.data.results.map(O));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(n.a)(a.a.mark((function e(r){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("".concat(l,"characters?name=").concat(r,"&").concat(u));case 2:return c=e.sent,e.abrupt("return",c.data.results.map(O));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(n.a)(a.a.mark((function e(r){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("".concat(l,"characters/").concat(r,"?").concat(u));case 2:return c=e.sent,e.abrupt("return",O(c.data.results[0]));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(n.a)(a.a.mark((function e(){var r,c,n=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>0&&void 0!==n[0]?n[0]:0,e.next=3,t("".concat(l,"comics?orderBy=issueNumber&limit=8&offset=").concat(r,"&").concat(u));case 3:return c=e.sent,e.abrupt("return",c.data.results.map(v));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(n.a)(a.a.mark((function e(r){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("".concat(l,"comics/").concat(r,"?").concat(u));case 2:return c=e.sent,e.abrupt("return",v(c.data.results[0]));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(e){return{id:e.id,name:e.name,description:e.description,thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,homepage:e.urls[0].url,wiki:e.urls[1].url,comics:e.comics.items}},v=function(e){return{id:e.id,title:e.title,description:e.description||"There is no description",thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,language:e.textObjects.language||"en-us",price:e.prices.price?"".concat(e.prices.price,"$"):"not available",pageCount:e.pageCount?"".concat(e.pageCount," pages"):"No information about the number of pages",url:e.urls[0].url}};return{total:h,process:c,getEveryOne:j,getAllCharacters:b,getCharacterByName:d,getCharacter:m,clearError:r,setProcess:o,getAllComics:f,getComics:p}}},40:function(e,t,r){"use strict";var c=r(27),a=r(9),n=(r(42),r(2)),s=function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("p",{className:"char__select",children:"Please select a character to see information"}),Object(n.jsxs)("div",{className:"skeleton",children:[Object(n.jsxs)("div",{className:"pulse skeleton__header",children:[Object(n.jsx)("div",{className:"pulse skeleton__circle"}),Object(n.jsx)("div",{className:"pulse skeleton__mini"})]}),Object(n.jsx)("div",{className:"pulse skeleton__block"}),Object(n.jsx)("div",{className:"pulse skeleton__block"}),Object(n.jsx)("div",{className:"pulse skeleton__block"})]})]})};t.a=function(e,t,r){switch(t){case"waiting":return Object(n.jsx)(s,{});case"loading":return Object(n.jsx)(a.a,{});case"error":return Object(n.jsx)(c.a,{});case"confirmed":return Object(n.jsx)(e,{data:r});default:throw new c.a("Unexpected process state")}}},42:function(e,t,r){},54:function(e,t,r){"use strict";var c=r(27),a=r(9),n=r(2);t.a=function(e,t,r){switch(t){case"waiting":return Object(n.jsx)(a.a,{});case"loading":return r?Object(n.jsx)(e,{}):Object(n.jsx)(a.a,{});case"error":return Object(n.jsx)(c.a,{});case"confirmed":return Object(n.jsx)(e,{});default:throw new c.a("Unexpected process state")}}},99:function(e,t,r){}}]);
//# sourceMappingURL=5.18e3c289.chunk.js.map